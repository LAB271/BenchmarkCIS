# Security Architecture

### Security Architecture

The security architecture of CountYourWords is designed to protect the system from unauthorized access and ensure data integrity. This section outlines the key security measures in place, including authentication, authorization, and data encryption.

#### Authentication

Authentication is the process of verifying a user's identity before granting them access to the system. In CountYourWords, authentication is handled using JWT (JSON Web Tokens). When a user logs in, they provide their credentials, which are verified against the stored credentials. If the credentials are valid, a JWT is issued and returned to the client.

```java
// Example of JWT generation in Java
String token = Jwts.builder()
    .setSubject(user.getUsername())
    .setIssuedAt(new Date())
    .setExpiration(new Date(System.currentTimeMillis() + 86400000)) // 1 day validity
    .signWith(SignatureAlgorithm.HS256, "secretKey")
    .compact();
```

The JWT is then used in subsequent requests to authenticate the user. The server verifies the token's signature and expiration before granting access.

#### Authorization

Authorization is the process of determining what actions a user can perform within the system. In CountYourWords, authorization is enforced using Spring Security. Each endpoint has associated roles that determine which users are allowed to access it.

```java
// Example of securing an endpoint in Spring Security
@RestController
@RequestMapping("/api")
public class WordController {

    @GetMapping("/words")
    @PreAuthorize("hasRole('USER')")
    public List<String> getWords() {
        // Endpoint logic here
    }
}
```

In this example, the `/api/words` endpoint is accessible only to users with the `USER` role.

#### Data Encryption

Data encryption is used to protect sensitive data both at rest and in transit. In CountYourWords, data is encrypted using AES (Advanced Encryption Standard) when stored in the database. Additionally, all communication between the client and server is encrypted using HTTPS.

```java
// Example of encrypting data using AES in Java
public byte[] encrypt(byte[] data, SecretKey secretKey) throws Exception {
    Cipher cipher = Cipher.getInstance("AES");
    cipher.init(Cipher.ENCRYPT_MODE, secretKey);
    return cipher.doFinal(data);
}
```

The encryption key is securely stored and managed to ensure that only authorized users can decrypt the data.

### Summary

In summary, CountYourWords employs a robust security architecture that includes authentication using JWTs, authorization using Spring Security roles, and data encryption using AES. These measures ensure that the system remains secure and protected against unauthorized access and data breaches.